window.translations = window.translations || [];
window.Translator = window.Translator || {};

{% if include_config %}
window.Translator.fallback      = '{{ fallback }}';
window.Translator.defaultDomain = '{{ defaultDomain }}';
{% endif %}

window.translations.push(
{% for locale, domains in translations %}
{% for domain, messages in domains %}
{% for key, message in messages %}
{
    'key': {{ key|json_encode|raw }},
    'message': {{ message|json_encode|raw }},
    'domain': '{{ domain }}',
    'locale': '{{ locale }}'
}{% if not loop.last %},{% endif %}
{% endfor %}
{% endfor %}
{% endfor %}
);